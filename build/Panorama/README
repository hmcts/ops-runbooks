<h2 id="panorama-software-updates">Panorama - Software Updates</h2>
<p>The current Panorama, Log Collectors and Firewall version is <code>10.1.5-h1</code>, <code>h</code> stands for Hotfix.
We aim to be as close as possible with Palo Alto software releases on both the Panorama management servers and the firewall servers.</p>
<h3 id="current-estate">Current Estate</h3>
<p>We have infrastructure in both UKSouth and UKWest listed below
- 2 <code>sbox</code> Panorama servers in Panorama mode (1 in each region)
- 4 <code>prod</code> Panorama servers in HA mode (2 in each region)
- 2 Log collectors (1 in each region)</p>
<h3 id="update-process">Update Process</h3>
<p>To update the Panorama servers is straight forward and there are already documented steps to 
follow in the <a href="https://docs.paloaltonetworks.com/pan-os/10-1/pan-os-upgrade/upgrade-panorama/install-content-and-software-updates-for-panorama/install-updates-for-panorama-with-internet-connection">Upgrade Panorama with an Internet Connection</a> documentation.</p>
<p>For the prod Panorama&rsquo;s in HA mode please follow the <a href="https://docs.paloaltonetworks.com/pan-os/10-1/pan-os-upgrade/upgrade-panorama/install-content-and-software-updates-for-panorama/install-updates-for-panorama-with-ha-configuration">Upgrade Panorama in an HA Configuration</a> guide.</p>
<h3 id="updates-via-panorama">Updates via Panorama</h3>
<p>There is an extensive guide, <a href="https://docs.paloaltonetworks.com/pan-os/10-1/pan-os-upgrade/upgrade-panorama/deploy-updates-to-firewalls-log-collectors-and-wildfire-appliances-using-panorama">Deploy Upgrades to Firewalls, Log Collectors, and WildFire Appliances Using Panorama</a> with steps 
on how to use Panorama to update other resources and the <a href="https://docs.paloaltonetworks.com/pan-os/10-1/pan-os-upgrade/upgrade-panorama/deploy-updates-to-firewalls-log-collectors-and-wildfire-appliances-using-panorama/upgrade-firewalls-when-panorama-is-internet-connected#id7434b9a4-90ca-4842-a5db-2afb4033753a">Firewalls</a>.</p>
<p>Log in details for the UKWest or UKSouth Panorama management servers requires only your HMCTS account as SSO has been setup, if you need elevated privileges e.g. to reboot the vm then log in using the admin details mentioned below.</p>
<h3 id="log-collectors">Log Collectors</h3>
<p>At the time of last update for the Log Collectors, this was done manually by login onto the vms. Admin login details for each region&rsquo;s Panorama management server can be found in the respective <code>panorama-sbox-xxx-kv</code> or <code>panorama-prod-xxx-kv</code>  keyvault in Azure. This would be the <code>panorama-admin-username</code> and <code>panorama-admin-password</code> items.
Please follow the below steps.</p>

<ul>
<li>Login onto the log collector vm, you need to be on the <code>VPN</code> and via the <code>bastions</code></li>
<li>Run the follow commands in order
<code>bash
show system info | match sw-version
</code>
to get the current version
<code>bash
request system software check
</code>
to get available versions to install
<code>bash
request system software download version &lt;version-number&gt;
</code>
to download target version, this will output a job id
<code>bash
show jobs id &lt;job-id&gt;
</code>
to view job status
<code>bash
request system software install version &lt;version-number&gt;
</code>
to install target version, this returns a job id
<code>bash
show jobs id &lt;job-id&gt;
</code><br>
to view job status
<code>bash
request restart system 
</code>
to restart the system, This will disconnect you from the SSH CLI session that you are connected to</li>
<li>Log back unto the Log Collector, give 5 to 7min for it to reboot<br>
Run the <code>show system info</code> command as above to verify that the version has been updated</li>
<li>Log unto the Panorama management web UI, navigate to
<code>Panorama</code> -&gt; <code>Managed Collectors</code> and verify that the Panorama log collector Status entries are <code>connected</code> and <code>In sync</code> and the Software Version also reflects the new version</li>
</ul>
