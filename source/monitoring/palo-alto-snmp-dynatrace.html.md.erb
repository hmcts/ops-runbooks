---
title: Updating Palo Alto SNMP settings
last_reviewed_on: 2024-03-28
review_in: 12 months
weight: 40
---
# <%= current_page.data.title %>

## Pre-Requisites

- Connected to the [VPN](https://portal.platform.hmcts.net)

## Checking the config in Panorama

Connect to [Panorama](https://panorama-prod--uks-0.platform.hmcts.net).

Select the stack you want to work on i.e., nonprod or prod, by clicking on the dropdown box beside `Template`:

<img src=images/palo-alto-stacks.png  width="600">

Click on `Device` and then `Server Profiles` and then `SNMP Trap.

You will see an SNMP trap configured that will point to the Dynatrace ActiveGates.

<img src=images/snmp-trap.png  width="600">

## Updating config

Configuration for the SNMP traps is managed via [hub-panorama-terraform](https://github.com/hmcts/hub-panorama-terraform/blob/ae3b4417bfed2dbbcee8006e4b8aa62635338f13/components/configuration/02-variables.tf#L134-L142).

You can update this variable to add or remove SNMP log destinations as needed.

At present, the SNMP traps are being sent to a DNS name. More details on these can be found [here](connecting-dynatrace-activegate.html).

If you need to switch the DNS to point to another instance in the scaleset, update the [azure-private-dns](https://github.com/hmcts/azure-private-dns/blob/a38b757dfaf20c65b21a1e9862dcfc0cdeed7c96/environments/prod/platform-hmcts-net.yml#L631-L642) repo.

There may be a brief pause in logs being received whilst the DNS updates.

## Checking SNMP logs are being received in Dynatrace

There are dashboards in Dynatrace that show various metrics from the Palo Altos which you can check to confirm SNMP data is being received.

If the graphs are being refreshed with new data, the logs are flowing.

- [NonProd dashboard](https://yrk32651.apps.dynatrace.com/ui/apps/dynatrace.classic.dashboards/#dashboard;gtf=-30m;gf=all;id=ab163c60-07f5-7e82-40d5-35cd6a8be991)
- [Prod dashboard](https://ebe20728.apps.dynatrace.com/ui/apps/dynatrace.classic.dashboards/#dashboard;gtf=-2h;gf=all;id=ab163c60-07f5-7e82-40d5-35cd6a8be991)